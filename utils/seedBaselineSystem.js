const { sequelize } = require('../config/db');
const User = require('../models/User');
const LicensingItem = require('../models/LicensingItem');
const fs = require('fs');
const path = require('path');

// ===== Licensing Item Factory =====
// Helper to build consistent licensing item seed objects.
const b = (itemNumber, name, env, pol, fire, hea, agr, lab) => ({
  itemNumber,
  name,
  needsEnvironmentalProtectionApproval: env,
  needsPoliceApproval: pol,
  needsFireDeptApproval: fire,
  needsHealthMinistryApproval: hea,
  needsAgricultureMinistryApproval: agr,
  needsLaborMinistryApproval: lab
});

// ===== Licensing Item Seed Dataset =====
// Full catalog based on business licensing order categories.
const itemsToSeed = [
  // Group 1: Health, pharmacy, cosmetics.
  b("1.1", "×‘×™×ª ××¨×§×—×ª", 0, 0, 1, 1, 0, 0),
  b("1.2 ×", "×ª××¨×•×§×™× - ×™×™×¦×•×¨×", 1, 2, 1, 1, 0, 0), 
  b("1.2 ×‘", "×ª××¨×•×§×™× - ××—×¡×•× ×", 0, 0, 1, 1, 0, 0),
  b("1.3 ×", "×ª×›×©×™×¨×™× ×•×¦×™×•×“ ×¨×¤×•××™ - ×™×™×¦×•×¨×", 1, 1, 1, 1, 0, 0),
  b("1.3 ×‘", "×ª×›×©×™×¨×™× ×•×¦×™×•×“ ×¨×¤×•××™ - ××—×¡×•× ×", 0, 0, 1, 1, 0, 0),
  b("1.3 ×’", "×ª×›×©×™×¨×™× ×•×¦×™×•×“ ×¨×¤×•××™ - ××›×™×¨×ª× ××• ×—×œ×•×§×ª×", 0, 0, 1, 1, 0, 0),
  b("1.3 ×“", "×”×¨×›×‘×ª ×¦×™×•×“ ×¨×¤×•××™", 0, 0, 1, 1, 0, 0),
  b("1.4 ×", "×˜×™×¤×•×œ ×™×•×¤×™, ×§×•×¡××˜×™×§×”, ×¤×“×™×§×•×¨, ×× ×™×§×•×¨, ××›×•×Ÿ ×©×™×–×•×£", 0, 2, 1, 1, 0, 0),
  b("1.4 ×‘", "××¡×¤×¨×”", 0, 2, 1, 1, 0, 0), 
  b("1.4 ×’", "×›×ª×•×‘×•×ª ×§×¢×§×¢", 0, 0, 1, 1, 0, 0),
  b("1.4 ×•", "× ×™×§×•×‘ ×—×•×¨×™× ×‘×’×•×£ ×”××“×", 0, 0, 1, 1, 0, 0),
  b("1.5 ×", "××¢×‘×“×” ×œ×‘×“×™×§×•×ª ×›×™××™×•×ª, ××™×§×¨×•×‘×™×•×œ×•×’×™×•×ª", 1, 0, 1, 1, 0, 0),
  b("1.5 ×‘", "××¢×‘×“×” ×œ×‘×“×™×§×ª ×“×’×™××•×ª ×‘×¢×œ×™ ×—×™×™× ×•××•×¦×¨×™× ××Ÿ ×”×—×™", 1, 0, 1, 1, 0, 0),
  b("1.6", "××¢×‘×“×” ×¨×¤×•××™×ª", 0, 0, 1, 1, 0, 0),
  b("1.7", "××¢×‘×“×ª ×©×™× ×™×™× ××¢×œ 300 ×\"×¨", 1, 1, 1, 1, 0, 0),
  b("1.8", "×—×“×¨ ××ª×™× ×œ××¢×˜ ×‘×‘×™×ª ×—×•×œ×™×", 1, 0, 1, 1, 0, 0),

  // Group 2: Fuel and energy.
  b("2.1 ×", "×’×– - ××™×œ×•×™ ××›×œ×™× ×•××›×œ×™×•×ª", 2, 1, 1, 0, 0, 1), 
  b("2.1 ×‘", "×’×– - ××—×¡×•× ×•", 2, 1, 1, 0, 0, 1),
  b("2.1 ×’", "×’×– - ××›×™×¨×ª×•, ×—×œ×•×§×ª×•", 1, 0, 1, 0, 0, 0),
  b("2.1 ×“", "×’×– - ×©×™× ×•×¢×•", 1, 0, 1, 0, 0, 0),
  b("2.1 ×”", "×’×– - ×ª×™×§×•×Ÿ ××›×œ×™×", 1, 1, 1, 0, 0, 0),
  b("2.1 ×•", "×’×– - ×—× ×™×•×Ÿ ×œ××›×œ×™×•×ª", 1, 0, 1, 0, 0, 0),
  b("2.1 ×–", "×ª×—× ×ª ×ª×“×œ×•×§ ×‘×’×–", 1, 1, 1, 0, 0, 0),
  b("2.2 ×", "×ª×—× ×ª ×“×œ×§ ×•×ª×“×œ×•×§", 1, 1, 1, 0, 0, 1),
  b("2.2 ×‘", "×‘×™×ª ×–×™×§×•×§", 1, 1, 1, 0, 0, 0),
  b("2.2 ×’", "×©×™× ×•×¢×• ×‘×¦× ×¨×ª", 1, 1, 0, 0, 0, 0),
  b("2.2 ×“", "××—×¡×•× ×• ×‘×›××•×™×•×ª ×”××¤×•×¨×˜×•×ª ×‘×ª×§× ×•×ª", 1, 1, 1, 0, 0, 0),
  b("2.2 ×”", "××¡×•×¤×™ ×“×œ×§", 1, 1, 1, 0, 0, 0),
  b("2.2 ×–", "×—× ×™×•×Ÿ ×œ××›×œ×™×•×ª ×“×œ×§", 1, 0, 1, 0, 0, 0),
  b("2.2 ×—", "×©×™× ×•×¢×• ×‘××›×œ×™×•×ª", 1, 1, 0, 0, 0, 0),
  b("2.3", "×¤×—× ×œ×¡×•×’×™×• ×”×›× ×”, ×¢×™×‘×•×“ ×•××—×¡×•×Ÿ", 1, 1, 1, 0, 0, 0),
  b("2.4", "×ª×—× ×ª ×›×•×—", 1, 1, 1, 0, 0, 1),

  // Group 3: Agriculture and animals.
  b("3.1", "×‘×™×ª ××˜×‘×—×™×™×, ×‘×™×ª × ×—×™×¨×”, ×‘×™×ª ×©×—×™×˜×”", 1, 0, 1, 1, 1, 0),
  b("3.2 ×", "×‘×¢×œ×™ ×—×™×™×, ×œ××¢×˜ ×¢×•×¤×•×ª â€“ ×’×™×“×•×œ×, ××—×–×§×ª×", 1, 0, 0, 0, 1, 0),
  b("3.2 ×‘", "×”×¦×’×ª×, ×œ×¨×‘×•×ª ×œ×©× ××›×™×¨×”", 1, 0, 1, 0, 1, 0),
  b("3.2 ×•", "××¡×¤×¨×” ×œ×‘×¢×œ×™ ×—×™×™× ×©×©×˜×—×” ××¢×œ 300 ×\"×¨", 1, 0, 1, 0, 1, 0),
  b("3.2 ×—", "×¢×•×¤×•×ª â€“ ×’×™×“×•×œ×, ××—×–×§×ª×, ×˜×™×¤×•×œ ×‘×”×", 1, 0, 1, 0, 1, 0),
  b("3.3 ×‘", "×”×“×‘×¨×” ×—×§×œ××™×ª ×‘×™×Ÿ ×‘×›×œ×™ ×˜×™×¡ ×•×‘×™×Ÿ ×‘×›×œ×™× ××—×¨×™×", 1, 1, 0, 0, 0, 0),
  b("3.4 ×", "×—×•××¨×™ ×”×“×‘×¨×”, ×—×•××¨×™ ×¨×¢×œ - ×™×™×¦×•×¨×, ××¨×™×–×ª×, ××—×¡×•× ×", 1, 1, 0, 0, 1, 0),
  b("3.4 ×’", "×—×•××¨×™ ×”×“×‘×¨×” - ××›×™×¨×ª×", 1, 0, 0, 0, 1, 0),
  b("3.5 ×", "××–×•×Ÿ ×œ×‘×¢×œ×™ ×—×™×™× - ×™×™×¦×•×¨×•, ×¢×™×‘×•×“×•, ××¨×™×–×ª×•", 1, 0, 1, 1, 1, 0),
  b("3.5 ×‘", "××–×•×Ÿ ×œ×‘×¢×œ×™ ×—×™×™× - ××—×¡×•× ×•, ×”×•×‘×œ×ª×•, ××›×™×¨×ª×•", 1, 0, 1, 0, 1, 0),
  b("3.6 ×", "×¤×¡×“×™× - ××™×¡×•×¤×, ××›×™×¨×ª×", 1, 0, 0, 0, 1, 0),
  b("3.6 ×‘", "×¤×¡×“×™× - ×¢×™×‘×•×“×", 1, 0, 1, 0, 1, 0),
  b("3.7 ×", "×ª×›×©×™×¨×™× ×•×ª×¨×›×™×‘×™× ×œ×©×™××•×© ×•×˜×¨×™× ×¨×™ - ×™×™×¦×•×¨×", 1, 0, 0, 1, 0, 0),
  b("3.7 ×‘", "×ª×›×©×™×¨×™× ×•×ª×¨×›×™×‘×™× ×œ×©×™××•×© ×•×˜×¨×™× ×¨×™ - ××—×¡×•× ×", 1, 0, 0, 1, 0, 0),

  // Group 4: Food.
  b("4.1 ×", "×‘×™×¦×™× - ×¨×™×›×•×–×Ÿ, ××™×•× ×Ÿ ×•××—×¡×•× ×Ÿ ×‘×ª×—× ×ª ××™×•×Ÿ", 1, 0, 0, 0, 1, 0),
  b("4.1 ×’", "×‘×™×¦×™× - ××“×’×¨×”", 1, 1, 0, 0, 1, 0),
  b("4.1 ×“", "×‘×™×¦×™× - ×”×•×‘×œ×ª×Ÿ ×œ×ª×—× ×ª ××™×•×Ÿ", 1, 0, 0, 0, 0, 0),
  b("4.2 ×", "××¡×¢×“×” ×œ×¨×‘×•×ª ××©×œ×•×— ××–×•×Ÿ", 0, 1, 1, 1, 0, 0),
  b("4.2 ×‘", "×‘×™×ª ×§×¤×”, ××–× ×•×Ÿ, ×‘×™×ª ××•×›×œ ××—×¨", 0, 1, 1, 1, 0, 0),
  b("4.2 ×’", "×”×›× ×ª ××–×•×Ÿ ×œ××›×™×¨×ª×• ×œ×¦×¨×™×›×” ××—×•×¥ ×œ××§×•×", 0, 0, 1, 1, 0, 0),
  b("4.3 ×", "×‘×™×ª ×§×™×¨×•×¨ - ×œ×‘×©×¨, ×“×’×™×, ×¢×•×¤×•×ª", 1, 0, 1, 1, 0, 0),
  b("4.3 ×‘", "×‘×™×ª ×§×™×¨×•×¨ - ×œ××–×•×Ÿ ××—×¨ ×•××¨×›×™×‘×™×•", 1, 0, 1, 1, 0, 0),
  b("4.4 ×‘", "×˜×™×¤×•×œ ×‘×‘×©×¨ ×’×•×œ××™ ×•××¨×™×–×ª×• (××¢×œ 5 ×˜×•×Ÿ)", 1, 1, 1, 1, 0, 0),
  b("4.4 ×–", "×˜×™×¤×•×œ ×‘×‘×©×¨ ×’×•×œ××™ ×•××¨×™×–×ª×• (×¢×“ 5 ×˜×•×Ÿ)", 1, 1, 1, 1, 0, 0),
  b("4.5 ×‘", "×—×œ×‘ ×’×•×œ××™ - ×”×•×‘×œ×ª×•", 1, 0, 0, 0, 0, 0),
  b("4.6 ×", "××–×•×Ÿ - ×™×™×¦×•×¨×•, ×¢×™×‘×•×“×•, ××¨×™×–×ª×•", 1, 1, 1, 1, 0, 0),
  b("4.6 ×’", "××–×•×Ÿ - ××—×¡×•× ×• ×‘×¢×¡×§ ×©×©×˜×—×• ××¢×œ 200 ×\"×¨", 0, 0, 1, 1, 0, 0),
  b("4.6 ×“", "××–×•×Ÿ - ×”×•×‘×œ×ª×•, ×”×¤×¦×ª×• ××• ×—×œ×•×§×ª×•", 1, 0, 0, 0, 0, 0),
  b("4.6 ×”", "×”×¡×¢×“×” (×§×™×™×˜×¨×™× ×’)", 0, 0, 1, 1, 0, 0),
  b("4.6 ×•", "××–×•×Ÿ - ×™×™×¦×•×¨×•, ×¢×™×‘×•×“×•, ××¨×™×–×ª×• (×¢×“ 50 ×˜×•× ×•×ª ×œ×™×•×)", 1, 0, 1, 1, 0, 0),
  b("4.7 ×", "×§×™×•×¡×§", 0, 2, 0, 1, 0, 0),
  b("4.7 ×‘", "××¨×›×•×œ (×©××™×Ÿ ×‘×• ×˜×™×¤×•×œ ×‘××–×•×Ÿ)", 0, 2, 0, 1, 0, 0),
  b("4.7 ×’", "××˜×œ×™×– â€“ ××›×™×¨×ª ×‘×©×¨, ×¢×•×¤×•×ª ××• ×“×’×™×", 0, 0, 1, 1, 0, 0),
  b("4.7 ×“", "××¨×›×•×œ (×©×™×© ×‘×• ×˜×™×¤×•×œ ×‘××–×•×Ÿ)", 0, 0, 1, 1, 0, 0),
  b("4.8", "××©×§××•×ª ××©×›×¨×™× â€“ ×¤××‘, ×‘×¨, ××¡×‘××”", 0, 1, 1, 1, 0, 0),

  // Group 5: Water and waste.
  b("5.1 ×", "××©×¤×” ×•×¤×¡×•×œ×ª - ×ª×—× ×ª ××¢×‘×¨ ×•××™×•×Ÿ", 1, 0, 1, 0, 0, 0),
  b("5.1 ×‘", "××©×¤×” ×•×¤×¡×•×œ×ª - ××™×¡×•×¤×”, ×”×•×‘×œ×ª×”", 1, 0, 0, 0, 0, 0),
  b("5.1 ×’", "×˜×™×¤×•×œ ×‘×¤×¡×•×œ×ª, ××™×—×–×•×¨×”, ××™×•× ×”", 1, 0, 1, 0, 0, 0),
  b("5.1 ×“", "××ª×¨ ×œ×¡×™×œ×•×§ ×¤×¡×•×œ×ª ×™×‘×©×”", 1, 0, 1, 0, 0, 0),
  b("5.1 ×”", "××ª×¨ ×œ×¡×™×œ×•×§ ×¤×¡×•×œ×ª ××¢×•×¨×‘×ª, ×œ×¨×‘×•×ª ×¤×¡×“×™×", 1, 0, 1, 0, 1, 0),
  b("5.2 ×", "××™ ×©×ª×™×™×” - ××™×ª×§×Ÿ ×”×ª×¤×œ×ª ××™×", 1, 0, 1, 1, 0, 0),
  b("5.2 ×‘", "××™ ×©×ª×™×™×” - ××™×ª×§×Ÿ ×œ×˜×™×¤×•×œ ×‘×”×", 0, 0, 1, 1, 0, 0),
  b("5.3 ×", "×©×¤×›×™× ×•×§×•×œ×—×™×Ÿ - ×¢×™×‘×•×“×, ×˜×™×”×•×¨×, ××—×¡×•× ×", 1, 0, 0, 1, 0, 0),
  b("5.3 ×’", "×©×¤×›×™× ×•×§×•×œ×—×™×Ÿ - ×”×•×‘×œ×ª× ×‘××›×œ×™×•×ª", 1, 0, 0, 1, 0, 0),

  // Group 6: Commerce and miscellaneous.
  b("6.1", "××—×¡× ×” ×‘×©×˜×— 50 ×\"×¨ ×•××¢×œ×”", 1, 0, 1, 0, 0, 0),
  b("6.2", "×—× ×•×ª ×©×©×˜×— ×”××›×™×¨×” ×‘×” ×”×•× 800 ×\"×¨ ×œ×¤×—×•×ª", 0, 1, 1, 0, 0, 0),
  b("6.4", "××›×‘×¡×”, × ×™×§×•×™ ×™×‘×©", 1, 0, 1, 0, 0, 0),
  b("6.5", "××›×©×™×¨×™ ××œ×§×˜×¨×•× ×™×§×” - ×™×™×¦×•×¨ ×¨×›×™×‘×™×", 1, 1, 1, 0, 0, 0),
  b("6.8 ×", "×§× ×™×•×Ÿ - × ×™×”×•×œ×•", 1, 1, 1, 0, 0, 0),
  b("6.8 ×‘", "×¢×¡×§ ×‘×§× ×™×•×Ÿ ×©××™×Ÿ ×‘×• ×—×‘×¨×ª × ×™×”×•×œ", 0, 1, 1, 0, 0, 0),
  b("6.9 ×", "×¨×•×›×œ×•×ª ××–×•×Ÿ", 0, 1, 0, 1, 0, 0),
  b("6.9 ×‘", "×¨×•×›×œ×•×ª ×‘×¢×¡×§ ×”×˜×¢×•×Ÿ ×¨×™×©×•×™ ×œ×¤×™ ×¤×¨×˜ ××—×¨", 0, 1, 0, 1, 0, 0),
  b("6.9 ×’", "×¨×•×›×œ×•×ª ××—×¨×ª", 0, 0, 0, 0, 0, 0),
  b("6.12", "×¢×¡×§ ×©×œ ××‘×–×¨×™ ××™×Ÿ", 1, 0, 1, 0, 0, 0),
  b("6.14", "××•×¦×¨×™ ×¢×™×©×•×Ÿ ×œ×¡×•×’×™×”×", 1, 0, 1, 0, 0, 0),

  // Group 7: Public entertainment, leisure, and sports.
  b("7.1 ×", "×‘×™×ª ××œ×•×Ÿ, ×¤× ×¡×™×•×Ÿ, ××›×¡× ×™×”", 2, 1, 1, 1, 0, 0),
  b("7.1 ×‘", "×”×©×›×¨×ª ×™×—×™×“×•×ª ××™×¨×•×— ×œ××˜×¨×ª × ×•×¤×©", 0, 1, 1, 1, 0, 0),
  b("7.1 ×’", "×‘×™×ª ××‘×•×ª", 1, 0, 1, 1, 0, 0),
  b("7.1 ×”", "×©×˜×— ××• ×’×Ÿ ×œ×—× ×™×™×ª ×˜×™×™×œ×™× ×‘×ª×©×œ×•×", 1, 0, 1, 1, 0, 0),
  b("7.2", "×’×Ÿ ×—×™×•×ª, ×¡×¤××¨×™, ×¤×™× ×ª ×—×™", 1, 1, 0, 1, 1, 0),
  b("7.4 ×", "×‘×¨×™×›×ª ×©×—×™×™×”", 0, 1, 1, 1, 0, 0),
  b("7.4 ×‘", "×¤××¨×§ ××™×, ××’×œ×©×•×ª ××™×", 0, 1, 1, 1, 0, 0),
  b("7.4 ×’", "×‘×¨×™×›×ª ×–×¨××™× (×’'×§×•×–×™)", 0, 0, 0, 1, 0, 0),
  b("7.4 ×“", "××§×•×•×”", 0, 0, 1, 1, 0, 0),
  b("7.4 ×”", "××¨×—×¦××•×ª", 0, 0, 1, 1, 0, 0),
  b("7.5", "××›×•×Ÿ ×›×•×©×¨", 0, 0, 0, 1, 0, 0),
  b("7.6", "××©×—×§×™× - ××§×•× ×œ×¢×¨×™×›×ª×", 0, 1, 1, 0, 0, 0),
  b("7.7 ×", "××§×•× ×œ×¢×¨×™×›×ª ××•×¤×¢×™× ×•×™×¨×™×“×™× ×‘××‘× ×” ×§×‘×¢", 0, 1, 1, 0, 0, 0),
  b("7.7 ×‘", "×§×•×œ× ×•×¢, ×ª××˜×¨×•×Ÿ", 0, 1, 1, 0, 0, 0),
  b("7.7 ×’", "×§×¨×§×¡", 0, 1, 1, 0, 0, 0),
  b("7.7 ×“", "××¦×˜×“×™×•×Ÿ, ××•×œ× ×¡×¤×•×¨×˜ ××¢×œ 500 ××•×©×‘×™×", 0, 1, 1, 0, 0, 0),
  b("7.7 ×”", "×××¤×™×ª××˜×¨×•×Ÿ, ××™×¨×•×¢×™ ×ª×¨×‘×•×ª ×ª×—×ª ×›×™×¤×ª ×”×©××™×", 0, 1, 1, 0, 0, 0),
  b("7.7 ×•", "×“×™×¡×§×•×˜×§", 0, 1, 1, 0, 0, 0),
  b("7.7 ×–", "×™×¨×™×“ ××• ×ª×¢×¨×•×›×” ×©×œ× ×‘××‘× ×” ×©×œ ×§×‘×¢", 0, 1, 1, 0, 0, 0),
  b("7.7 ×—", "×›×œ×™ ×©×™×˜ ×”××©××© ×œ×¢×™× ×•×’ ×¦×™×‘×•×¨×™", 1, 0, 0, 1, 0, 0),
  b("7.7 ×˜", "××§×•× ×œ×¢×¨×™×›×ª ××•×¤×¢×™× ×•×™×¨×™×“×™× ×©×™×© ×‘×• ×‘×¢×œ×™ ×—×™×™×", 1, 1, 0, 0, 1, 0),
  b("7.7 ×™", "×™×¨×™×“ ××–×•×Ÿ", 1, 0, 1, 1, 0, 0),
  b("7.7 ×™×", "××¦×˜×“×™×•×Ÿ, ××•×œ× ×¡×¤×•×¨×˜ ×¢×“ 500 ××•×©×‘×™×", 0, 1, 1, 0, 0, 0),
  b("7.8 ×", "×§×™×™×˜× ×”", 0, 0, 1, 1, 0, 0),
  b("7.8 ×‘", "××—× ×” × ×•×¢×¨", 1, 0, 1, 1, 0, 0),
  b("7.9", "××•×œ× ××• ×’×Ÿ ×œ×©××—×•×ª ×•×œ××™×¨×•×¢×™×", 0, 1, 1, 1, 0, 0),
  b("7.10 ×", "××™×ª×§× ×™ ×©×¢×©×•×¢×™×", 0, 0, 1, 0, 0, 0),
  b("7.10 ×‘", "×œ×•× ×” ×¤××¨×§", 0, 1, 1, 0, 0, 0)
];

// ===== Seed Runner =====
const runSeed = async () => {
  try {
    await sequelize.authenticate();
    
    // Recreate schema for a clean system seed state.
    await sequelize.sync({ force: true });
    console.log('ğŸ—‘ï¸ ××¡×“ ×”× ×ª×•× ×™× × ×•×§×” ×•×”×˜×‘×œ××•×ª × ×‘× ×• ××—×“×©.');

    // Create default admin account.
    await User.create({
      fullName: '×¤×‘×œ ×¨×–×•×“×œ×•×‘',
      email: 'admin@system.local', // ××•×ª×× ×œ××•×“×œ ×”×§×™×™×
      password: '43554355',
      role: 'admin',
      isApproved: true
    });
    console.log('âœ… ××©×ª××© ×× ×”×œ × ×•×¦×¨ ×‘×”×¦×œ×—×”.');
    console.log('Login: admin@system.local / 43554355');

    // Insert licensing items catalog.
    await LicensingItem.bulkCreate(itemsToSeed);
    console.log(`âœ… ${itemsToSeed.length} ×¤×¨×™×˜×™ ×¦×• ×¨×™×©×•×™ ×¢×¡×§×™× ×”×•×–×¨×§×• ×‘×”×¦×œ×—×”!`);

    console.log("ğŸ‰ ×ª×”×œ×™×š ×”-SEED ×”×¡×ª×™×™× ×‘×”×¦×œ×—×”!");
    process.exit();
  } catch (err) {
    console.error('âŒ ×©×’×™××” ×—××•×¨×” ×‘××”×œ×š ×”-SEED:', err);
    process.exit(1);
  }
};

runSeed();